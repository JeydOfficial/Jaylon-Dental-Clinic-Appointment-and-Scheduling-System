<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <title>Jaylon Dental Clinic Scheduling and Appointment System</title>
    <!-- Favicon-->
    <link rel="icon" href="{% static 'favicon.ico' %}" type="image/x-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&subset=latin,cyrillic-ext" rel="stylesheet"
          type="text/css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css">

    <!-- Bootstrap Core Css -->
    <link href="{% static 'plugins/bootstrap/css/bootstrap.css' %}" rel="stylesheet">

    <!-- Waves Effect Css -->
    <link href="{% static 'plugins/node-waves/waves.css' %}" rel="stylesheet"/>

    <!-- Animation Css -->
    <link href="{% static 'plugins/animate-css/animate.css' %}" rel="stylesheet"/>

    <!-- Bootstrap Material Datetime Picker Css -->
    <link href="{% static 'plugins/bootstrap-material-datetimepicker/css/bootstrap-material-datetimepicker.css' %}"
          rel="stylesheet"/>

    <!-- Bootstrap DatePicker Css -->
    <link href="{% static 'plugins/bootstrap-datepicker/css/bootstrap-datepicker.css' %}" rel="stylesheet"/>

    <!-- Wait Me Css -->
    <link href="{% static 'plugins/waitme/waitMe.css" rel="stylesheet' %}"/>

    <!-- Bootstrap Select Css -->
    <link href="{% static 'plugins/bootstrap-select/css/bootstrap-select.css' %}" rel="stylesheet"/>

    <!-- JQuery DataTable Css -->
    <link href="{% static 'plugins/jquery-datatable/skin/bootstrap/css/dataTables.bootstrap.css' %}" rel="stylesheet">

    <!-- Custom Css -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet">

    <!-- AdminBSB Themes. You can choose a theme from css/themes instead of get all themes -->
    <link href="{% static 'css/themes/all-themes.css' %}" rel="stylesheet"/>

    <style>
        .image-container {
            position: relative;
            display: inline-block;
            width: 100%;
            max-width: 500px; /* Limit the maximum width of the image */
            height: 300px;
        }

        .badge-delete-button {
            position: absolute;
            top: 1%;
            right: 1%;
            background: red; /* Red background for the badge */
            color: white; /* White color for the icon */
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10; /* Ensure it stays on top of the image */
            transition: background 0.3s ease, transform 0.3s ease; /* Smooth transition for hover effects */
        }

        .badge-delete-button:hover {
            background: darkred; /* Darker red background on hover */
            transform: scale(1.1); /* Slightly increase the size of the button */
        }

        .img-responsive {
            width: 100%; /* Make the image fully responsive */
            height: 100%;
            object-fit: cover; /* Maintain aspect ratio and cover the container */
        }

    </style>

</head>

<body class="theme-cyan">

<!-- Page Loader -->
<div class="page-loader-wrapper">
    <div class="loader">
        <div class="preloader">
            <div class="spinner-layer pl-red">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div>
                <div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>
        </div>
        <p>Please wait...</p>
    </div>
</div>
<!-- #END# Page Loader -->

<!-- Overlay For Sidebars -->
<div class="overlay"></div>
<!-- #END# Overlay For Sidebars -->

<!-- Top Bar -->
<nav class="navbar">
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="javascript:void(0);" class="navbar-toggle collapsed" data-toggle="collapse"
               data-target="#navbar-collapse" aria-expanded="false"></a>
            <a href="javascript:void(0);" class="bars"></a>
            <a class="navbar-brand" href="index.html">ADMIN - JAYLON DENTAL CLINIC SCHEDULING AND APPOINTMENT SYSTEM</a>
        </div>
        <div class="collapse navbar-collapse" id="navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                <!-- Sign-out -->
                <li>
                    <a href="{% url 'logout' %}" data-toggle="tooltip" data-placement="bottom" title="Sign-out">
                        <i class="material-icons">input</i>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- #Top Bar -->

<section>
    <!-- Left Sidebar -->
    <aside id="leftsidebar" class="sidebar">
        <!-- User Info -->
        <div class="user-info" style="display: flex; justify-content: center; align-items: center;">
            <div class="image" style="">
                <img src="{% static 'images/user.png' %}" width="120" height="120" alt="User"/>
            </div>
        </div>
        <!-- #User Info -->
        <!-- Menu -->
        <div class="menu">
            <ul class="list">
                <li class="header">MAIN NAVIGATION</li>

                <li class="{% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
                    <a href="{% url 'dashboard' %}">
                        <i class="material-icons">event</i>
                        <span>Appointment</span>
                    </a>
                </li>
                <li class="{% if request.resolver_match.url_name == 'services' %}active{% endif %}">
                    <a href="{% url 'services' %}">
                        <i class="material-icons">medical_services</i>
                        <span>Services</span>
                    </a>
                </li>
                <li class="{% if request.resolver_match.url_name == 'gallery' %}active{% endif %}">
                    <a href="{% url 'gallery' %}">
                        <i class="material-icons">photo_library</i>
                        <span>Gallery</span>
                    </a>
                </li>
                <li class="{% if request.resolver_match.url_name == 'accounts' %}active{% endif %}">
                    <a href="{% url 'accounts' %}">
                        <i class="material-icons">group</i>
                        <span>Accounts</span>
                    </a>
                </li>
            </ul>
        </div>
        <!-- #Menu -->
        <!-- Footer -->
        <div class="legal">
            <div class="copyright">
                &copy; 2024 <a href="javascript:void(0);">Jaylon Dental Clinic</a>.
            </div>
            <div class="version">
                <b>Version: </b> 1.0
            </div>
        </div>
        <!-- #Footer -->
    </aside>
    <!-- #END# Left Sidebar -->
</section>

{% block content %}{% endblock %}

<!-- Jquery Core Js -->
<script src="{% static 'plugins/jquery/jquery.min.js' %}"></script>

<!-- Bootstrap Core Js -->
<script src="{% static 'plugins/bootstrap/js/bootstrap.js' %}"></script>

<!-- Select Plugin Js -->
<script src="{% static 'plugins/bootstrap-select/js/bootstrap-select.js' %}"></script>

<!-- Slimscroll Plugin Js -->
<script src="{% static 'plugins/jquery-slimscroll/jquery.slimscroll.js' %}"></script>

<!-- Waves Effect Plugin Js -->
<script src="{% static 'plugins/node-waves/waves.js' %}"></script>

<!-- Jquery CountTo Plugin Js -->
<script src="{% static 'plugins/jquery-countto/jquery.countTo.js' %}"></script>

<!-- Morris Plugin Js -->
<script src="{% static 'plugins/raphael/raphael.min.js' %}"></script>
<script src="{% static 'plugins/morrisjs/morris.js' %}"></script>

<!-- Jquery DataTable Plugin Js -->
<script src="{% static 'plugins/jquery-datatable/jquery.dataTables.js' %}"></script>
<script src="{% static 'plugins/jquery-datatable/skin/bootstrap/js/dataTables.bootstrap.js' %}"></script>
<script src="{% static 'plugins/jquery-datatable/extensions/export/dataTables.buttons.min.js' %}"></script>
<script src="{% static 'plugins/jquery-datatable/extensions/export/buttons.flash.min.js' %}"></script>
<script src="{% static 'plugins/jquery-datatable/extensions/export/jszip.min.js' %}"></script>
<script src="{% static 'plugins/jquery-datatable/extensions/export/pdfmake.min.js' %}"></script>
<script src="{% static 'plugins/jquery-datatable/extensions/export/vfs_fonts.js' %}"></script>
<script src="{% static 'plugins/jquery-datatable/extensions/export/buttons.html5.min.js' %}"></script>
<script src="{% static 'plugins/jquery-datatable/extensions/export/buttons.print.min.js' %}"></script>

<!-- Autosize Plugin Js -->
<script src="{% static 'plugins/autosize/autosize.js' %}"></script>

<!-- Moment Plugin Js -->
<script src="{% static 'plugins/momentjs/moment.js' %}"></script>

<!-- Bootstrap Material Datetime Picker Plugin Js -->
<script src="{% static 'plugins/bootstrap-material-datetimepicker/js/bootstrap-material-datetimepicker.js' %}"></script>

<!-- Bootstrap Datepicker Plugin Js -->
<script src="{% static 'plugins/bootstrap-datepicker/js/bootstrap-datepicker.js' %}"></script>

<!-- Custom Js -->
<script src="{% static 'js/admin.js' %}"></script>
<script src="{% static 'js/pages/tables/jquery-datatable.js' %}"></script>
<script src="{% static 'js/pages/forms/basic-form-elements.js' %}"></script>

<!-- Demo Js -->
<script src="{% static 'js/demo.js' %}"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
// Line Chart for Monthly Appointments
const ctx = document.getElementById('monthlyAppointmentsChart').getContext('2d');

// Create a gradient for the background
const gradientFill = ctx.createLinearGradient(0, 0, 0, 400);
gradientFill.addColorStop(0, 'rgba(75, 192, 192, 0.4)');
gradientFill.addColorStop(1, 'rgba(153, 102, 255, 0.4)');

const monthlyAppointmentsChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: {{ months|safe }},  // Use month names including year
        datasets: [{
            label: 'Monthly Appointments',
            data: {{ monthly_totals|safe }},  // Appointment counts per month
            backgroundColor: gradientFill,
            borderColor: 'rgba(75, 192, 192, 1)',
            borderWidth: 2,
            pointBackgroundColor: 'rgba(75, 192, 192, 1)',
            pointBorderColor: '#fff',
            pointBorderWidth: 2,
            pointRadius: 5,
            fill: true,
            tension: 0.3  // Smooth the lines
        }]
    },
    options: {
        responsive: true,
        plugins: {
            legend: {
                display: false
            },
            title: {
                display: false
            },
            tooltip: {
                callbacks: {
                    label: function(tooltipItem) {
                        return `Appointments: ${tooltipItem.raw}`;
                    }
                }
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                title: {
                    display: true,
                    text: 'Number of Appointments',
                    color: '#333',
                    font: {
                        size: 14
                    }
                },
                ticks: {
                    color: '#333'
                }
            }
        }
    }
});

</script>

<script>
// Bar Chart for Last 7 Days Appointments
const ctxBar = document.getElementById('dailyAppointmentsChart').getContext('2d');

// Define an array of colors for the bars
const barColors = [
    'rgba(255, 99, 132, 0.6)', // Red
    'rgba(54, 162, 235, 0.6)', // Blue
    'rgba(255, 206, 86, 0.6)', // Yellow
    'rgba(75, 192, 192, 0.6)', // Teal
    'rgba(153, 102, 255, 0.6)', // Purple
    'rgba(255, 159, 64, 0.6)', // Orange
    'rgba(255, 99, 132, 0.6)'  // Red (repeated for consistency)
];

const dailyAppointmentsChart = new Chart(ctxBar, {
    type: 'bar',
    data: {
        labels: {{ days|safe }},  // Day names for the last 7 days
        datasets: [{
            label: 'Appointments in Last 7 Days',
            data: {{ daily_totals|safe }},  // Appointment counts per day
            backgroundColor: barColors,  // Apply the array of colors
            borderColor: barColors.map(color => color.replace('0.6', '1')), // Adjust border color
            borderWidth: 2,
            barThickness: 30,
            borderRadius: 5
        }]
    },
    options: {
        responsive: true,
        plugins: {
            legend: {
                display: false
            },
            title: {
                display: false
            },
            tooltip: {
                callbacks: {
                    label: function(tooltipItem) {
                        return `Appointments: ${tooltipItem.raw}`;
                    }
                }
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                title: {
                    display: true,
                    text: 'Number of Appointments',
                    color: '#333',
                    font: {
                        size: 14
                    }
                },
                ticks: {
                    color: '#333'
                }
            }
        }
    }
});

</script>


</body>
</html>